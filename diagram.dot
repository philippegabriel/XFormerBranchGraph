strict digraph g{
rankdir="TB";
nodesep=0.5;
ranksep=0.25;
splines=line;
forcelabels=false;

// general
node [style=filled, color="black", 
    fontcolor="black", font="Consolas", fontsize="8pt" ];
edge [arrowhead=vee, color="black", penwidth=2];

// branch names
node [fixedsize=false, penwidth=0, fillcolor=none, shape=none, width=0, height=0, margin="0.05"];
subgraph {
    rank=same;
    specs [label="specs", group="specs"];
}
subgraph {
    rank=same;
    ma [label="master", group="master"];
}

subgraph {
    rank=same;
    featA [label="feature A", group="featA"];
}
subgraph {
    rank=same;
    featB [label="feature B", group="featB"];
}
// tags
node [shape=cds, fixedsize=false, fillcolor="#C6C6C6", penwidth=1, margin="0.11,0.055"]
t1 [label="tag\nv0.1"]
t2 [label="tag\nv0.2"]
t3 [label="tag\nv0.3"]

// graph
node [width=0.2, height=0.2, fixedsize=true, label="", margin="0.11,0.055", shape=circle, penwidth=2, fillcolor="#FF0000"]

node  [group="specs", fillcolor="#FFE333"];
s1 [label="s1"];
s2 [label="s2"];
s3 [label="s3"];
s1 -> s2 -> s3;
s3 -> specs [color="#b0b0b0", style=dashed, arrowhead=none ];

node  [group="master", fillcolor="#FFE333"];
m1 [label="m1"];
m2 [label="m2"];
m3 [label="m3"];
m1 -> m2 -> m3;
m3 -> ma [color="#b0b0b0", style=dashed, arrowhead=none ];
subgraph{ rank=same; s1; m1; }
subgraph{ rank=same; s2; m2; }

node  [group="featA", fillcolor="#FB3DB5"];
fa1 [label="fa1"];
fa2 [label="fa2"];
fa3 [label="fa3"];
fa4 [label="fa4"];
fa5 [label="fa5"];
fa6 [label="fa6"];
fa1 -> fa2 -> fa3 -> fa4 -> fa5 -> fa6;
fa6 -> featA [color="#b0b0b0", style=dashed, arrowhead=none ];

node  [group="featB", fillcolor="#FB3DB5"];
fb1 [label="fb1"];
fb2 [label="fb2"];
fb3 [label="fb3"];
fb4 [label="fb4"];
//subgraph{ rank=same; fa6; fb4; } // hack
//subgraph{ rank=same; fa1; fb1; } // hack

fb1 -> fb2 -> fb3 -> fb4;
fb4 -> featB [color="#b0b0b0", style=dashed, arrowhead=none ];

m1 -> fa1;
fa3 -> m2;
m2 -> fb3;
m1 -> fb1;
fb4 -> m3;

// tags connections
edge [color="#b0b0b0", style=dotted, len=0.3, arrowhead=none, penwidth=1];
subgraph  {
    rank="same";
    m1 -> t1;
}
subgraph  {
    rank="same";
    m2 -> t2 ;
}
subgraph  {
    rank="same";
    m3 -> t3;
}
}
